<html>
    <head>
        <script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
        <script src="/socket.io/socket.io.js"></script>
        <script>
            var socket = io.connect('http://localhost:4000');

            $(document).ready(function() {
                var element = $("#row").find("td");
                var onChannelData = function (channel) {
                    var r = Math.floor(channel[2] * 255);
                    var g = Math.floor(channel[3] * 255);
                    var b = Math.floor(channel[4] * 255);
                    $(element[channel[1]]).css("background-color", "rgb("+r+", "+g+", "+b+")");
                };

                socket.on('tick', function (data) {
                    data.forEach(function (d) {
                        onChannelData(d);
                    });
                });


                $("#wavegreen").click(function() {
                    socket.emit("switch", "wavegreen");
                });
                $("#strobe").click(function() {
                    socket.emit("switch", "strobe");
                });
                $("#wavecolor").click(function() {
                    socket.emit("switch", "wavecolor");
                });
            });
        </script>

        <style>
            html, body {
                background-color: black;
            }
            td{
                width: 50px;
                height: 500px;
            }
        </style>
    </head>
    <body>

        <button id="wavegreen">WAVE GREEN</button> <button id="strobe">STROBE</button> <button id="wavecolor">WAVE COLOR</button>

        <table>
            <tr id="row">
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
        </table>
    </body>
</html>